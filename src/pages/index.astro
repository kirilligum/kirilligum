---
import { getCollection } from 'astro:content';
const blogPosts = await getCollection('blog');
// Sort by updated date if available, otherwise by publish date, most recent first.
blogPosts.sort((a, b) => {
	const dateA = a.data.updatedDate || a.data.date;
	const dateB = b.data.updatedDate || b.data.date;
	return dateB.valueOf() - dateA.valueOf();
});
const projectsPosts = await getCollection('projects');
projectsPosts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf()); // Sort projects by date
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg?v=2" />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Questrial&display=swap" rel="stylesheet">
		<meta name="viewport" content="width=device-width" />
		<meta name="description" content="A personal homepage in the style of brutalism and nature." />
		<title>Kirill Igumenshchev - Homepage</title>
		<style>
			body {
				font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
				background-color: #fff; /* Light gray background */
				color: #222; /* Dark text for contrast */
				margin: 2rem 1rem;
			}
			header {
				font-family: monospace;
				margin-bottom: 2rem;
			}
			h1 {
				font-family: 'Questrial', monospace;
				font-weight: bold;
				line-height: 1.1;
				margin-bottom: 1rem;
			}
			h2, h3, h4, h5, h6 {
				font-family: 'Questrial', monospace;
				font-weight: bold;
				line-height: 1.1;
				margin-bottom: 1rem;
				border: 3px solid #222;
				display: inline-block;
				background-color: #f0f0f0;
			}
			h2 {
				font-size: 1.5em;
				padding: 0.5rem 1rem;
				box-shadow: 2px 2px 0px #222;
			}
			h3 {
				font-size: 1.25em;
				padding: 0.4rem 0.8rem;
				box-shadow: 3px 3px 0px #222;
			}
			h4 {
				font-size: 1.1em;
				padding: 0.3rem 0.6rem;
				box-shadow: 4px 4px 0px #222;
			}
			h5 {
				font-size: 1em;
				padding: 0.2rem 0.5rem;
				box-shadow: 5px 5px 0px #222;
			}
			h6 {
				font-size: 0.9em;
				padding: 0.1rem 0.4rem;
				box-shadow: 6px 6px 0px #222;
			}
			section {
				margin-bottom: 2rem;
			}
			a {
				color: #007bff; /* Example link color */
				text-decoration: none;
			}
			a:hover {
				text-decoration: underline;
			}
		</style>
	</head>
	<body>
		<header>
			<h1>Kirill Igumenshchev</h1>
		</header>
		<section id="about">
			<h2>About Me</h2>
			<p>
				Hi, I'm Kirill Igumenshchev.
				<br><br>
				<a href="https://x.com/kirill_igum">X (Twitter)</a> | <a href="https://github.com/kirilligum/">GitHub</a> | <a href="https://www.linkedin.com/in/kirilligum/">LinkedIn</a>
			</p>
		</section>
		<section id="blog">
			<h2>Blog</h2>
			<ul>
				{blogPosts.map((post) => (
					<li>
						<a href={`/blog/${post.slug}`}>{post.data.title}</a>
                        <span style="font-size: 0.8em; color: #777; margin-left: 1em;">
                            {post.data.date.toLocaleDateString()}
                            {post.data.updatedDate && ` (updated ${post.data.updatedDate.toLocaleDateString()})`}
                        </span>
					</li>
				))}
			</ul>
		</section>
		<section id="projects">
			<h2>Projects</h2>
			<p>
				AI, blockchain, web3, and data science projects: decentralized networks, on-chain RLHF, smart contracts, and data analysis tools.
			</p>
			<p><a href="/projects">View all projects</a></p>
		</section>
		<section id="resume"><h2>Resume</h2><p><a href="#">Link to your resume</a></p></section>
	</body>
</html>
