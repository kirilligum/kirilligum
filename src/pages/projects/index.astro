---
import { getCollection } from 'astro:content';
const projectsPosts = await getCollection('projects');
projectsPosts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf()); // Sort projects by date
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg?v=2" />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Questrial&display=swap" rel="stylesheet">
		<meta name="viewport" content="width=device-width" />
		<meta name="description" content="Projects page" />
		<title>Projects - Kirill Igumenshchev</title>
        <style>
			body {
				font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
				background-color: #fff;
				color: #222;
				margin: 2rem 1rem;
			}
			header {
				font-family: monospace;
				margin-bottom: 2rem;
			}
			h1 {
				font-family: 'Questrial', monospace;
				font-weight: bold;
				line-height: 1.1;
				margin-bottom: 1rem;
			}
			h2, h3, h4, h5, h6 {
				font-family: 'Questrial', monospace;
				font-weight: bold;
				line-height: 1.1;
				margin-bottom: 1rem;
				border: 3px solid #222;
				padding: 0.5rem 1rem;
				display: inline-block;
				box-shadow: 6px 6px 0px #222;
				background-color: #f0f0f0;
			}
			section {
				margin-bottom: 2rem;
			}
			a {
				color: #007bff;
				text-decoration: none;
			}
			a:hover {
				text-decoration: underline;
			}
        </style>
	</head>
	<body>
		<header>
			<h1>Projects</h1>
		</header>
		<section>
            <article>
                <ul>
                    {projectsPosts.map((post) => (
                        <li key={post.slug}>
                            <h3>{post.data.title}</h3>
                            <p>{post.data.description.split(' ').slice(0, 100).join(' ')}... <a href="#">Read more</a></p>
                            {post.data.skills && post.data.skills.length > 0 && (
                                <p>Skills: {post.data.skills.join(', ')}</p>
                            )}
                            {post.data.liveLink && <p><a href={post.data.liveLink} target="_blank">Live Demo</a></p>}
                            {post.data.githubLink && <p><a href={post.data.githubLink} target="_blank">GitHub</a></p>}
                            {post.data.tags && post.data.tags.length > 0 && <p>Tags: {post.data.tags.join(', ')}</p>}
                            <p style="font-size: 0.8em; color: #777;">Date: {post.data.date.toLocaleDateString()}</p>
                            <hr/>
                        </li>
                    ))}
                </ul>
            </article>
 		</section>
 	</body>
 </html>
